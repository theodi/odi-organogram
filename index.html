<!DOCTYPE html>
<meta charset="utf-8">
<title>ODI Organogram</title>
<style>

.node circle {
  fill: #fff;
  stroke: #2254F4;
  stroke-width: 1.5px;
}

.node.hiring circle {
  stroke: #FF6700;
}

.node {
  font: 10px "Helvetica Neue" "Helvetica" sans-serif;
}

.node.hiring {
  color: #333333;
}

.link {
  fill: none;
  stroke: #ccc;
  stroke-width: 1.5px;
}

</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script type="text/csv" id="people">Member Id,First Name,Last Name,Reference Name,Role Title,Role Type,# Reports,Reports To ID,Reports To,Membership (11),Training (12),Franchise (5),Services (24),Evidence (22),R&D (22),Strategy (7),Environment (13),Culture (15),leadership (12),finance (3),sales (10),marketing (1),engagement (5),account mgmt (5),project mgmt (11),consultancy (6),research (15),training (3),product mgmt (9),tech dev (8),communications (3),production (6),events (3),team support (9),people dev (3)
1,NK,NK,Account Manager,Account Manager,Permanent,0,63,Richard Stirling,,,,X,,,,,,,,,,,X,,,,,,,,,,,
2,Adrian,Philpott,Adrian Philpott,Brand Design,Associate,0,39,Kathryn Corrick,,,,,,X,,,X,,,,,,,,,,,,,,X,,,
3,Alison,Walters,Alison Walters,Finance,Permanent,0,44,Louise Burke,,,,,,,,X,,,X,,,,,,,,,,,,,,,
4,Amanda,Smith,Amanda Smith,Community Engagement Manager,Permanent,0,79,Tom Health,,,,,X,X,,,,,,,,X,,,,,,,,,,,,
5,Andrea,Cox,Andrea Cox,Membership Manager,Permanent,0,24,Georgia Phillips,X,,,,,,,,,,,,,X,X,,,,,,,,,,,
6,Anna,Scott,Anna Scott,Writer / Editor,Permanent,0,39,Kathryn Corrick,,,,X,X,,,,X,,,,,,,,,,,,,,X,,,
7,Anneza,Pitsialis,Anneza Pitsialis,Programme Administrator,Permanent,0,63,Richard Stirling,,,X,,,,,,,,,,,,X,,,,,,,,,,,
8,Benjamin,Cave,Benjamin Cave,Trainer,Permanent,0,71,Simon Bullmore,,X,,,,,,,,,,,,,,,,,X,,,,,,,
9,Briony,Phillips,Briony Phillips,ODCS Programme Lead,Fixed-term,0,34,Jeni Tennison,,,,X,,,,,,,,,,X,,,,,,X,,,,,,
10,Carl,Rodrigues,Carl Rodrigues,Commercial Sales,Associate,0,23,Gavin Starks,X,,,,,,,,,,,X,,,,,,,,,,,,,,
11,Carlina,George,Carlina George,People,Permanent,0,48,Michelle Prescott,,,,,,,,X,,,,,,,,,,,,,,,,,,X
12,Clara,Lewis,Clara Lewis,Programme Support,Permanent,0,31,Jade Croucher,X,,,,,,,,,,,,,,,,,,,,,,,,X,
13,Dave,Tarrant,Dave Tarrant,Senior Trainer,Permanent,0,71,Simon Bullmore,,X,,,,,,,,,,,,,,,,,X,,,,,,,
14,Dawn,Duhaney,Dawn Duhaney,Junior Analyst,Permanent,0,20,Emma Truswell,,,,X,,,,,,,,,,,,,,X,,,,,,,,
15,NK,NK,Developer,Developer,Permanent,0,32,James Smith,,,,,,X,,,,,,,,,,,,,,,X,,,,,
16,NK,NK,Digital Marketing Manager,Digital Marketing Manager,Permanent,0,47,Membership Business Manager,X,X,,X,X,X,,,X,,,,X,,,,,,,,,,,,,
17,NK,NK,Digital Producer,Digital Producer,Permanent,0,26,Head of Content,,,,,,,,,X,,,,,,,,,,,,,,X,,,
18,Ellen,Broad,Ellen Broad,Policy Advisor,Permanent,0,34,Jeni Tennison,,,,X,X,,X,,,,,,,,,,X,,,,,,,,,
19,Emma,Thwaites,Emma Thwaites,Communications,Associate,2,23,Gavin Starks,,,,,X,,X,,X,,,,,,,,,,,,,X,,,,
20,Emma,Truswell,Emma Truswell,Programme Lead,Permanent,2,63,Richard Stirling,,,,X,,,,,,,,,,,X,X,,,,,,,,,,
21,Fiona,Smith,Fiona Smith,Researcher (OD4D),Fixed-term,0,43,Liz Carolan,,,,X,,,,,,,,,,,,,,X,,,,,,,,
22,NK,NK,Franchise Manager,Franchise Manager,Permanent,0,63,Richard Stirling,,,X,,,,,,,X,,,,,,,,,,X,,,,,,
23,Gavin,Starks,Gavin Starks,CEO,Permanent,15,,,X,X,X,,,,X,,X,X,,X,,,,,,,,X,,,,,,
24,Georgia,Phillips,Georgia Phillips,Head of Commercial Partnerships,Permanent,1,34,Jeni Tennison,X,,,,,,,,,,,,,,X,,,,,X,,,,,,
25,Hannah,Redler,Hannah Redler,Art Programme,Associate,0,23,Gavin Starks,,,,,,,,,X,,,,,,,X,,,,,,,,,,
26,NK,NK,Head of Content,Head of Content,Permanent,1,23,Gavin Starks,,,,,,,,,X,X,,,,,,,,,,,,,X,,,
27,NK,NK,Head of Product,Head of Product,Permanent,0,23,Gavin Starks,X,X,,X,,,X,,,X,,,,,,,,,,X,,,,,,
28,Helen,Desmond,Helen Desmond,Communications,Associate,0,19,Emma Thwaites,,,,,X,,,,X,,,,,,,,,,,,,X,,,,
29,Iraia,Monteagudo,Iraia Monteagudo,Operations Team Leader,Permanent,0,31,Jade Croucher,,,,,,,,X,,,,,,,,,,,,,,,,,X,
30,Jack,Hardinges,Jack Hardinges,Research Assistant,Fixed-term,0,79,Tom Health,,,,,X,,,,,,,,,,,,,X,,,,,,,,
31,Jade,Croucher,Jade Croucher,Operations Manager,Permanent,7,23,Gavin Starks,,,,,,,,X,,X,,,,,,,,,,,,,,,X,
32,James,Smith,James Smith,Head of R&D,Permanent,2,34,Jeni Tennison,,,,,,X,,,,X,,,,,,,,,,,X,,,,,
33,Jamie,Fawcett,Jamie Fawcett,Research Assistant,Fixed-term,0,79,Tom Health,,,,,X,,,,,,,,,,,,,X,,,,,,,,
34,Jeni,Tennison,Jeni Tennison,Deputy CEO & Technical Director,Permanent,11,23,Gavin Starks,,,,X,X,X,X,,,X,,,,,,,X,,,,X,,,,,
35,Joe,Packman,Joe Packman,Business Support Administrator,Permanent,0,31,Jade Croucher,,,,,,X,,X,,,,,,,,,,,,,,,,,X,
36,Julie,Freeman,Julie Freeman,Art Programme,Associate,0,23,Gavin Starks,,,,,,,,,X,,,,,,,X,,,,,,,,,,
37,NK,NK,Junior Developer,Junior Developer,Permanent,0,32,James Smith,,,,,,X,,,,,,,,,,,,,,,X,,,,,
38,Kateryna,Onyiliogwu,Kateryna Onyiliogwu,Business Support Administrator,Permanent,0,31,Jade Croucher,,,,,X,,,X,,,,,,,,,,,,,,,,,X,
39,Kathryn,Corrick,Kathryn Corrick,Content,Associate,4,23,Gavin Starks,,,,,,,,,X,,,,,,,,,,,,,,X,X,,
40,Keren,Bowman,Keren Bowman,Events Coordinator,Permanent,1,39,Kathryn Corrick,X,,X,X,X,X,,,X,,,,,,,,,,,,,,,X,,
41,Leigh,Dodds,Leigh Dodds,Senior Technical Consultant,Permanent,0,63,Richard Stirling,,,,X,,,,,,,,,,,,,X,,,X,,,,,,
42,Leonard,Mack,Leonard Mack,Research Bid Writer,Fixed-term,0,79,Tom Health,,,,,X,X,,,,,,X,,,,,,X,,,,,,,,
43,Liz,Carolan,Liz Carolan,International Development Manager,Fixed-term,1,63,Richard Stirling,,,,X,,,,,,,,X,,,,,X,,,,,,,,,
44,Louise,Burke,Louise Burke,Finance & Compliance Director,Permanent,2,23,Gavin Starks,,,,,,,X,X,,X,X,,,,,,,,,,,,,,,
45,Mandy,Costello,Mandy Costello,Training Projects and Delivery Manager,Permanent,1,71,Simon Bullmore,,X,,,,,,,,,,,,,,X,,,,,,,,,,
46,Maria,Demetriou,Maria Demetriou,Business Support Administrator ,Permanent,0,31,Jade Croucher,,,,,,,,X,,,,,,,,,,,,,,,,X,,
47,NK,NK,Membership Business Manager,Membership Business Manager,Permanent,2,23,Gavin Starks,X,,,,,,,,,X,,X,,,,,,,,X,,,,,,
48,Michelle,Prescott,Michelle Prescott,People,Associate,1,23,Gavin Starks,,,,,,,,X,,,,,,,,,,,,,,,,,,X
49,NK,NK,Open Data Story Producer,Open Data Story Producer,Permanent,0,79,Tom Health,,,,,X,,,,,,,,,,,X,,X,,,,,,,,
50,Patrice,John-Baptiste,Patrice John-Baptiste,Communications,Permanent,0,19,Emma Thwaites,,,,,X,,,,X,,,,,,,,,,,,,X,,,,
51,Patrik,Wagner,Patrik Wagner,Commercial Sales,Fixed-term,0,23,Gavin Starks,X,,,,,,,,,,,X,,,,,,,,,,,,,,
52,NK,NK,PeopleDev,PeopleDev,Permanent,0,34,Jeni Tennison,,,,,,,,X,,,,,,,,,,,,,,,,,,X
53,NK,NK,PhD Student 1,PhD Student 1,Fixed-term,0,60,Research Scientist/Engineer,,,,,,X,,,,,,,,,,,,X,,,,,,,,
54,NK,NK,PhD Student 2,PhD Student 2,Fixed-term,0,60,Research Scientist/Engineer,,,,,,X,,,,,,,,,,,,X,,,,,,,,
55,Phil,Lang,Phil Lang,Digital Production,Permanent,0,39,Kathryn Corrick,,,,X,X,,,,X,,,,,,,,,,,,,,X,,,
56,NK,NK,Programme Support,Programme Support,Permanent,0,31,Jade Croucher,,,,,,,,X,,,,,,,,,,,,,,,,,X,
57,NK,NK,Research Intern 3,Research Intern 3,Fixed-term,0,79,Tom Health,,,,,X,X,,,,,,,,,,,,X,,,X,,,,,
58,NK,NK,Research Intern 4,Research Intern 4,Fixed-term,0,79,Tom Health,,,,,X,X,,,,,,,,,,,,X,,,X,,,,,
59,NK,NK,Research Project Manager,Research Project Manager,Permanent,0,79,Tom Health,,,,,X,X,,,,,,,,,,X,,,,,,,,,,
60,NK,NK,Research Scientist/Engineer,Research Scientist/Engineer,Permanent,2,79,Tom Health,,,,,,X,,,,,,,,,,,,X,,,,,,,,
61,NK,NK,Researcher (Social Sciences),Researcher (Social Sciences),Permanent,0,79,Tom Health,,,,,X,,,,,,,,,,,,,X,,,,,,,,
62,Richard,Norris,Richard Norris,Innovation Unit Project Manager,Permanent,0,34,Jeni Tennison,,,,X,X,X,,,,,,,,,,X,,,,,,,,,,
63,Richard,Stirling,Richard Stirling,International Director,Permanent,10,23,Gavin Starks,,,X,X,,,X,,,X,,X,,,,,,,,,,,,,,
64,Roderick,Montgomery,Roderick Montgomery,Executive Support,Temp,0,31,Jade Croucher,,,,,,,,X,,,,,,,,,,,,,,,,,X,
65,NK,NK,Sales (Membership & Training),Sales (Membership & Training),Permanent,0,47,Membership Business Manager,X,X,,,,,,,,,,X,,,,,,,,,,,,,,
66,Sam,Haines,Sam Haines,Training Projects and Delivery Manager,Permanent,0,71,Simon Bullmore,,X,,,,,,,,,,,,,,X,,,,,,,,,,
67,Sam,Michel,Sam Michel,Summit Programme Delivery,Associate,0,40,Keren Bowman,,,,,,,,,X,,,,,,,X,,,,,,,,,,
68,Sam,Pikesley,Sam Pikesley,Head of Robots,Permanent,0,34,Jeni Tennison,,,,,,X,,,,,,,,,,,,,,,X,,,,,
69,NK,NK,Services Intern 1,Services Intern 1,Fixed-term,0,63,Richard Stirling,,,,X,,,,,,,,,,,,,,X,,,,,,,,
70,NK,NK,Services Intern 2,Services Intern 2,Fixed-term,0,63,Richard Stirling,,,,X,,,,,,,,,,,,,,X,,,,,,,,
71,Simon,Bullmore,Simon Bullmore,Business Manager (Training),Permanent,5,23,Gavin Starks,,X,,,,,,,,X,,X,,,,,,,,,,,,,,
72,NK,NK,Startup Programme Coordinator,Startup Programme Coordinator,Permanent,0,82,Ulrich Atz,,,,X,,,,,,,,,,X,,X,,,,,,,,,,
73,NK,NK,Startup Programme Support,Startup Programme Support,Permanent,0,82,Ulrich Atz,,,,X,,,,,,,,,,,,,,,,,,,,,X,
74,Steff,Warwick,Steff Warwick,Business Support Administrator,Permanent,0,45,Mandy Costello,,X,,,,,,,,,,,,,,,,,,,,,,,X,
75,Stephanie,Dunstan,Stephanie Dunstan,Finance Assistant,Permanent,0,44,Louise Burke,,,,,,,,X,,,X,,,,,,,,,,,,,,,
76,Stuart,Harrison,Stuart Harrison,Developer,Permanent,0,34,Jeni Tennison,,,,,,X,,,,,,,,,,,,,,,X,,,,,
77,Sumika,Sakanishi,Sumika Sakanishi,Product Manager,Permanent,0,34,Jeni Tennison,,,,,,X,,,,,,,,,,,,,,X,,,,,,
78,NK,NK,Technical Consultant,Technical Consultant,Permanent,0,34,Jeni Tennison,,,,X,,,,,,,,,,,,,X,,,,,,,,,
79,Tom,Health,Tom Health,Head of Research,Permanent,10,34,Jeni Tennison,,,,,X,X,,,,X,,,,,,,,X,,,,,,,,
80,Tom,Tharakan,Tom Tharakan,Bid Manager,Permanent,0,63,Richard Stirling,,X,,X,X,X,,,,,,X,,,,,,,,,,,,,,
81,NK,NK,Trainer,Trainer,Associate,0,71,Simon Bullmore,,X,,,,,,,,,,,,,,,,,X,,,,,,,
82,Ulrich,Atz,Ulrich Atz,Startup Programme Manager,Permanent,2,63,Richard Stirling,,,,X,,,,,,,,,,X,,,,,,X,,,,,,
83,William,Gerry,William Gerry,Junior Consultant,Permanent,0,20,Emma Truswell,,,,X,,,,,,,,,,,,X,X,,,,,,,,,</script>
<script>

var diameter = 960;
var radius = diameter / 2;

var cluster = d3.layout.cluster()
    .size([360, radius - 120]);

var tree = d3.layout.tree()
    .size([360, diameter / 2 - 120])
    .separation(function(a, b) { return (a.parent == b.parent ? 1 : 2) / a.depth; });

var diagonal = d3.svg.diagonal.radial()
    .projection(function(d) { return [d.y, d.x / 180 * Math.PI]; });

var svg = d3.select("body").append("svg")
    .attr("width", radius * 2)
    .attr("height", radius * 2)
  .append("g")
    .attr("transform", "translate(" + radius + "," + radius + ")");

var peopleLookup = {};
var parentLookup = {};
var peopleRootId;

d3.csv.parse(document.getElementById('people').firstChild.nodeValue, function (d) {
  var person = {
    id: +d["Member Id"],
    name: d["Reference Name"],
    inPost: d["First Name"] !== "NK",
    roleTitle: d["Role Title"],
    parent: +d["Reports To ID"]
  };
  peopleLookup[person.id] = person;
  if (parentLookup[person.parent] == undefined) {
    parentLookup[person.parent] = [];
  }
  parentLookup[person.parent].push(person.id);
  if (person.parent == 0) {
    peopleRootId = person.id;
  }
  return;
});

var createHierarchy = function (id) {
  var 
    person = peopleLookup[id],
    p = { 
      name: person.name, 
      inPost: person.inPost,
      roleTitle: person.roleTitle
    },
    children = parentLookup[id];
  if (children !== undefined) {
    p.children = [];
    for (var i = 0; i < children.length; i++) {
      p.children.push(createHierarchy(children[i]));
    }
  }
  return p;
};

var root = createHierarchy(peopleRootId);

// uncomment to get all the leaf nodes at the same level
// var nodes = cluster.nodes(root);
// var links = cluster.links(nodes);

// leaf nodes at different levels
var nodes = tree.nodes(root);
var links = tree.links(nodes);

var link = svg.selectAll("path.link")
    .data(links)
  .enter().append("path")
    .attr("class", "link")
    .attr("d", diagonal);

var node = svg.selectAll("g.node")
    .data(nodes)
  .enter().append("g")
    .attr("class", function (d) { return "node " + (d.inPost ? "hired" : "hiring")})
    .attr("transform", function(d) { return "rotate(" + (d.x - 90) + ")translate(" + d.y + ")"; })

node.append("title")
    .text(function(d) { return d.roleTitle; });

node.append("circle")
    .attr("r", 4.5);

node.append("text")
    .attr("dy", ".31em")
    .attr("text-anchor", function(d) { return d.x < 180 ? "start" : "end"; })
    .attr("transform", function(d) { return d.x < 180 ? "translate(8)" : "rotate(180)translate(-8)"; })
    .text(function(d) { return d.name; });

d3.select(self.frameElement).style("height", radius * 2 + "px");

</script>
